<script>
  // Mobile menu toggle
  document.getElementById('menu-btn').addEventListener('click', function () {
    const menu = document.getElementById('mobile-menu');
    menu.classList.toggle('hidden');
  });

  // --- HAMARA NAYA UPDATE SHURU ---

  // 1. Saare Tools ka Data ek jagah
  const allTools = [
    {
      name: "JSON Formatter",
      desc: "Clean, validate, and pretty-print your messy JSON data in one click.",
      link: "/json-formatter.html",
      icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" /></svg>`
    },
    {
      name: "README.md Generator",
      desc: "Fill out a simple form to generate a professional README for your GitHub projects.",
      link: "/readme-generator.html",
      icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>`
    },
    {
      name: "Snippet Sharer",
      desc: "Quickly share code snippets with a unique link. Powered by Firebase.",
      link: "/snippet-sharer.html",
      icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 5.314l9.566 5.314m0 0a2.25 2.25 0 100-2.186m0 2.186c-.18.324-.283.696-.283 1.093s.103.77.283 1.093m0 2.186l-9.566-5.314m9.566-5.314l-9.566 5.314" /></svg>`
    },
    {
      name: "Color Palette Generator",
      desc: "Generate beautiful, accessible color palettes for your projects instantly.",
      link: "/color-palette-generator.html",
      icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zm-7.518-.267A8.25 8.25 0 1120.25 10.5M8.288 14.212A5.25 5.25 0 1117.25 10.5" /></svg>`
    },
    {
      name: "Regex Tester",
      desc: "Test your Regular Expressions in real-time with syntax highlighting.",
      link: "/regex-tester.html",
      icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h13.5m-13.5 7.5h13.5m-1.313-14.25L12 3.75l-1.437 1.25m2.874 0l-5.75 5.75M12 3.75l1.437 1.25m-2.874 0l5.75 5.75m-5.75 0l-2.875 2.875M12 21.75l2.188-2.188m-2.188 0L9.813 19.5m2.188 0l2.188 2.188M12 21.75l-2.188-2.188m2.188 0l-2.188 2.188" /></svg>`
    },
    {
      name: "CSS Gradient Generator",
      desc: "Visually create complex, beautiful CSS gradients and copy the code.",
      link: "/css-gradient-generator.html",
      icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" /></svg>`
    }
  ];

  // 2. Tools ko HTML mein badalne waala Function
  const toolsGrid = document.getElementById('tools-grid');

  function renderTools(toolsToRender) {
    // Pehle grid ko khaali karo
    toolsGrid.innerHTML = ''; 

    toolsToRender.forEach(tool => {
      // Har tool ke liye HTML card banao
      const toolCard = `
        <a href="${tool.link}" class="tool-card group block bg-white p-6 rounded-lg shadow-md border border-gray-200 hover:shadow-lg hover:border-primary-500 transition-all">
          <div class="flex items-center gap-4">
            <div class="h-12 w-12 rounded-lg bg-primary-100 text-primary-600 flex items-center justify-center">
              ${tool.icon}
            </div>
            <div>
              <h3 class="text-lg font-bold text-gray-900 group-hover:text-primary-600">${tool.name}</h3>
              <p class="text-sm text-gray-600">${tool.desc}</p>
            </div>
          </div>
        </a>
      `;
      // Card ko grid mein daalo
      toolsGrid.innerHTML += toolCard;
    });
  }

  // 3. Naya Search Function (jo data par chalta hai)
  document.getElementById('tool-search').addEventListener('input', function () {
    const searchTerm = this.value.toLowerCase();
    
    // Sirf woh tools filter karo jinka naam ya desc match kare
    const filteredTools = allTools.filter(tool => {
      const title = tool.name.toLowerCase();
      const desc = tool.desc.toLowerCase();
      return title.includes(searchTerm) || desc.includes(searchTerm);
    });

    // Filter kiye gaye tools ko screen par dikhao
    renderTools(filteredTools);
  });

  // 4. Page load hote hi saare tools dikha do
  // Ye 'DOMContentLoaded' PWA ke liye 'load' se behtar hai
  window.addEventListener('DOMContentLoaded', () => {
    renderTools(allTools);
  });

  // --- HAMARA NAYA UPDATE KHATAM ---


  // Capture the install prompt for Chrome/Edge (desktop & Android)
  let deferredPrompt;
  const installBtn = document.getElementById('installBtn');

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.classList.remove('hidden');
  });

  installBtn?.addEventListener('click', async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    installBtn.classList.add('hidden');
    deferredPrompt = null;
    console.log('User install choice:', outcome);
  });

  // Register service worker at the root so scope covers entire site
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js').then(reg => {
        console.log('Service Worker registered', reg.scope);
      }).catch(err => {
        console.error('Service Worker registration failed', err);
      });
    });
  }
</script>
